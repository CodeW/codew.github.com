---
layout: post
title: "mysql index"
description: ""
category: [mysql]
tags: [mysql, index]
---
{% include JB/setup %}

索引类型
---
*	普通索引：最基本的索引，允许有空值，不用保持唯一
*	唯一索引：允许有空值，但是必须保持唯一
*	主键索引：特殊的唯一索引，不允许有空值
*	组合索引

索引特点
---
*	优点：加快查询速度
*	缺点：占用磁盘空间，降低数据库更新操作（UPDATE, INSERT）的速度

性能优化
---
#### 创建索引 ####
*	创建索引的时候可以指定一个固定大小值，这样能提高索引查询速度。例如：建表时，usernname长度为16，建索引时指定为10。这是因为一般情况下名字的长度不会超过10，这样会加速索引查询速度，还会减少索引文件的大小，提高INSERT的更新速度。而且即使插入的值超过了10也是可以成功被插入进来的。（但是如果名字超过10了的话查询的时候是不是就用不上索引而导致全表扫描？猜测应该时这样的，还没试验过。）

#### 什么样的字段不适合建索引 ####
*	有NULL值的列
*	区分度低的列，比如性别。

#### 使用索引 ####
*	MySQL执行查询时，只能使用一个索引，它会从多个索引中选择一个限制最为严格的索引。因此如果where子句中已经使用了索引的话，那么order by中的列是不会使用索引的。因此数据库默认排序可以符合要求的情况下不要使用排序操作；尽量不要包含多个列的排序，如果需要最好给这些列创建复合索引。
*	有组合索引的列，使用时需满足“最左前缀”原则，简单的理解就是组合索引中最左边的列一定要出现在sql中。（需不需要第一个出现不太确定，待验证...）

#### 哪些情况会导致索引失效 ####
*	有NULL值的列不会用上索引，复合索引中只要有一列含有NULL值，那么这一列对于此复合索引就是无效的。
*	在列上进行函数运算时
*	like的时候在关键词左边用了通配符
*	NOT IN和<>操作
*	优化程序认为如果使用索引会需要花费更多时间时